<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>zacq - 3åˆ†ã§ãƒãƒ¼ã‚±ãƒƒãƒˆã‚’ç†è§£ã™ã‚‹</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0f1a;
      --bg-secondary: #111827;
      --bg-card: #1a2234;
      --bg-card-hover: #1f2a40;
      --accent-blue: #3b82f6;
      --accent-cyan: #06b6d4;
      --accent-emerald: #10b981;
      --accent-amber: #f59e0b;
      --accent-rose: #f43f5e;
      --accent-red: #ef4444;
      --accent-purple: #8b5cf6;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --border-color: #2a3548;
      --gradient-1: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
      --gradient-2: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
      --shadow-glow: 0 0 40px rgba(59, 130, 246, 0.15);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', 'DM Sans', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    #root {
      min-height: 100vh;
    }

    ::selection {
      background: var(--accent-blue);
      color: white;
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-color);
      border-radius: 3px;
    }

    html {
      scroll-behavior: smooth;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid var(--text-muted);
      border-top-color: var(--accent-blue);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    /* Mobile optimizations */
    @media (max-width: 480px) {
      body {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect } = React;

    // ========== ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ ==========
    const marketData = {
      date: '2025å¹´11æœˆ28æ—¥ï¼ˆé‡‘ï¼‰',
      indices: [
        { name: 'æ—¥çµŒå¹³å‡', value: '38,134', change: '-0.37%', trend: 'down' },
        { name: 'TOPIX', value: '2,680', change: '-0.21%', trend: 'down' },
        { name: 'ãƒ‰ãƒ«å††', value: '151.52', change: '-0.85%', trend: 'down' },
        { name: 'å††10å¹´å›½å‚µ', value: '1.07%', change: '+0.01', trend: 'up' },
        { name: 'S&P500', value: '5,998', change: '-0.38%', trend: 'down' },
        { name: 'NASDAQ', value: '19,060', change: '-0.59%', trend: 'down' },
        { name: 'ç±³10å¹´å›½å‚µ', value: '4.24%', change: '-0.03', trend: 'down' },
        { name: 'BTC/JPY', value: '14,523,000', change: '-1.2%', trend: 'down' },
      ],
      topics: [
        {
          id: 1,
          category: 'é‡‘èæ”¿ç­–',
          headline: 'æ±äº¬CPI 2.8ï¼…ã€æ—¥éŠ€åˆ©ä¸Šã’è¦³æ¸¬å¼·ã¾ã‚‹',
          summary: '11æœˆã®æ±äº¬éƒ½åŒºéƒ¨æ¶ˆè²»è€…ç‰©ä¾¡æŒ‡æ•°ï¼ˆã‚³ã‚¢CPIï¼‰ãŒå‰å¹´æ¯”+2.8ï¼…ã¨å¸‚å ´äºˆæƒ³ã‚’ä¸Šå›ã‚Šã€æ—¥éŠ€ã®12æœˆåˆ©ä¸Šã’è¦³æ¸¬ãŒä¸€æ®µã¨å¼·ã¾ã£ãŸã€‚',
          why: [
            'æ±äº¬ã‚³ã‚¢CPIãŒ+2.8ï¼…ã¨å¸‚å ´äºˆæƒ³ï¼ˆ+2.6ï¼…ï¼‰ã‚’ä¸Šå›ã‚‹ä¼¸ã³ã‚’è¨˜éŒ²',
            'ã‚µãƒ¼ãƒ“ã‚¹ä¾¡æ ¼ã®ä¸Šæ˜‡ãŒé¡•è‘—ã§ã€è³ƒé‡‘ä¸Šæ˜‡ã®ä¾¡æ ¼è»¢å«ãŒé€²ã‚“ã§ã„ã‚‹å…†å€™',
            'å††å®‰ã«ã‚ˆã‚‹è¼¸å…¥ç‰©ä¾¡ä¸Šæ˜‡ã®å½±éŸ¿ãŒå¼•ãç¶šãç‰©ä¾¡ã‚’æŠ¼ã—ä¸Šã’',
            'æ—¥éŠ€ã®æ¤ç”°ç·è£ãŒã€Œãƒ‡ãƒ¼ã‚¿æ¬¡ç¬¬ã§é©åˆ‡ã«å¯¾å¿œã€ã¨ç™ºè¨€ã—ã€12æœˆåˆ©ä¸Šã’ã®å¯èƒ½æ€§ã‚’ç¤ºå”†',
          ],
          tenSecondSummary: 'æ±äº¬ã®ã‚¤ãƒ³ãƒ•ãƒ¬ç‡ãŒäºˆæƒ³ä»¥ä¸Šã«é«˜ãã€æ—¥éŠ€ãŒ12æœˆã«åˆ©ä¸Šã’ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã¾ã£ã¦ã„ã¾ã™ã€‚è³ƒé‡‘ä¸Šæ˜‡ãŒã‚µãƒ¼ãƒ“ã‚¹ä¾¡æ ¼ã«è»¢å«ã•ã‚Œå§‹ã‚ã¦ãŠã‚Šã€æ—¥éŠ€ãŒç›®æŒ‡ã™ã€Œè³ƒé‡‘ã¨ç‰©ä¾¡ã®å¥½å¾ªç’°ã€ãŒè¦‹ãˆã¦ããŸå½¢ã§ã™ã€‚',
          questions: [
            { q: 'æ±äº¬CPIã¨å…¨å›½CPIã®é•ã„ã¯ï¼Ÿ', a: 'æ±äº¬CPIã¯æ¯æœˆä¸‹æ—¬ã«ç™ºè¡¨ã•ã‚Œã€å…¨å›½CPIã‚ˆã‚Šç´„2é€±é–“æ—©ãå‡ºã‚‹ãŸã‚ã€Œå…ˆè¡ŒæŒ‡æ¨™ã€ã¨ã—ã¦æ³¨ç›®ã•ã‚Œã¾ã™ã€‚æ±äº¬ã®ç‰©ä¾¡å‹•å‘ãŒå…¨å›½ã«æ³¢åŠã™ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€æ—¥éŠ€ã®æ”¿ç­–åˆ¤æ–­ã«ã‚‚å½±éŸ¿ã—ã¾ã™ã€‚' },
            { q: '12æœˆåˆ©ä¸Šã’ã®ç¢ºç‡ã¯ã©ã®ãã‚‰ã„ï¼Ÿ', a: 'å¸‚å ´ã§ã¯12æœˆåˆ©ä¸Šã’ã®ç¢ºç‡ã‚’60-70ï¼…ç¨‹åº¦ã¨ç¹”ã‚Šè¾¼ã‚“ã§ã„ã¾ã™ã€‚ãŸã ã—ã€ç±³å›½ã®çµŒæ¸ˆæŒ‡æ¨™ã‚„ç‚ºæ›¿å‹•å‘æ¬¡ç¬¬ã§å¤‰ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€æ—¥éŠ€ã¯ã€Œãƒ‡ãƒ¼ã‚¿æ¬¡ç¬¬ã€ã®å§¿å‹¢ã‚’å´©ã—ã¦ã„ã¾ã›ã‚“ã€‚' },
            { q: 'åˆ©ä¸Šã’ã•ã‚Œã‚‹ã¨ä½•ã«å½±éŸ¿ã™ã‚‹ï¼Ÿ', a: 'ä½å®…ãƒ­ãƒ¼ãƒ³ï¼ˆå¤‰å‹•é‡‘åˆ©ï¼‰ã®ä¸Šæ˜‡ã€é é‡‘é‡‘åˆ©ã®ä¸Šæ˜‡ã€å††é«˜æ–¹å‘ã¸ã®åœ§åŠ›ã€éŠ€è¡Œæ ªã®ä¸Šæ˜‡ãªã©ãŒæƒ³å®šã•ã‚Œã¾ã™ã€‚ä¸€æ–¹ã€ä¸å‹•ç”£ãƒ»REITã«ã¯é€†é¢¨ã¨ãªã‚Šã‚„ã™ã„ã§ã™ã€‚' },
          ],
        },
        {
          id: 2,
          category: 'æ—¥æœ¬æ ª',
          headline: 'æ—¥çµŒå¹³å‡5ä¸‡å††å°ã‚­ãƒ¼ãƒ—ã‚‚ã€11æœˆã¯â–²4ï¼…è¶…ã®èª¿æ•´',
          summary: 'æ—¥çµŒå¹³å‡ã¯38,000å††å°ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã‚‚ã®ã®ã€11æœˆã¯æœˆé–“ã§4ï¼…è¶…ã®ä¸‹è½ã€‚ç±³å›½ã®åˆ©ä¸‹ã’ãƒšãƒ¼ã‚¹éˆåŒ–è¦³æ¸¬ã¨å††é«˜é€²è¡ŒãŒé‡è·ã«ã€‚',
          why: [
            'ç±³FRBã®åˆ©ä¸‹ã’ãƒšãƒ¼ã‚¹ãŒæƒ³å®šã‚ˆã‚Šé…ããªã‚‹ã¨ã®è¦‹æ–¹ãŒåºƒãŒã‚Šã€ã‚°ãƒ­ãƒ¼ã‚¹æ ªã«é€†é¢¨',
            'ãƒ‰ãƒ«å††ãŒ151å††å°ã¾ã§å††é«˜ãŒé€²è¡Œã—ã€è¼¸å‡ºä¼æ¥­ã®æ¥­ç¸¾æ‡¸å¿µãŒæµ®ä¸Š',
            'åŠå°ä½“é–¢é€£æ ªãŒåˆ©ç›Šç¢ºå®šå£²ã‚Šã«æŠ¼ã•ã‚Œã€æŒ‡æ•°ã®é‡è·ã«',
            '12æœˆã®FOMCãƒ»æ—¥éŠ€ä¼šåˆã‚’æ§ãˆã€ãƒã‚¸ã‚·ãƒ§ãƒ³èª¿æ•´ã®å£²ã‚ŠãŒå‡ºã‚„ã™ã„æ™‚æœŸ',
          ],
          tenSecondSummary: '11æœˆã®æ—¥çµŒå¹³å‡ã¯4ï¼…è¶…ä¸‹è½ã—ã¾ã—ãŸãŒã€ã“ã‚Œã¯å¥å…¨ãªèª¿æ•´ã®ç¯„å›²ã§ã™ã€‚ãƒãƒ–ãƒ«æœŸã®é«˜å€¤ã‚’è¶…ãˆãŸæ°´æº–ã‚’ç¶­æŒã—ã¦ãŠã‚Šã€ä¼æ¥­æ¥­ç¸¾ã‚‚å …èª¿ã€‚å¹´æœ«ã«å‘ã‘ã¦ã¯æ—¥ç±³ã®é‡‘èæ”¿ç­–æ¬¡ç¬¬ã§æ–¹å‘æ„ŸãŒå‡ºã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚',
          questions: [
            { q: 'ã“ã®èª¿æ•´ã¯ã¾ã ç¶šãï¼Ÿ', a: '12æœˆã®FOMCã¨æ—¥éŠ€ä¼šåˆãŒå¤§ããªåˆ†å²ç‚¹ã«ãªã‚Šã¾ã™ã€‚ç±³å›½ã®åˆ©ä¸‹ã’è¦‹é€šã—ãŒå¾Œé€€ã™ã‚Œã°è¿½åŠ èª¿æ•´ã‚‚ã‚ã‚Šãˆã¾ã™ãŒã€æ—¥æœ¬ä¼æ¥­ã®æ¥­ç¸¾ã¯å …èª¿ãªãŸã‚ã€å¤§å¹…ãªä¸‹è½ã¯æƒ³å®šã—ã«ãã„çŠ¶æ³ã§ã™ã€‚' },
            { q: 'å††é«˜ã¯æ—¥æœ¬æ ªã«ãƒã‚¤ãƒŠã‚¹ï¼Ÿ', a: 'è¼¸å‡ºä¼æ¥­ï¼ˆè‡ªå‹•è»Šãƒ»é›»æ©Ÿãªã©ï¼‰ã«ã¯ãƒã‚¤ãƒŠã‚¹ã§ã™ãŒã€å†…éœ€ä¼æ¥­ã‚„è¼¸å…¥ã‚³ã‚¹ãƒˆæ¸›ã®ãƒ¡ãƒªãƒƒãƒˆã‚’å—ã‘ã‚‹ä¼æ¥­ã«ã¯ãƒ—ãƒ©ã‚¹ã§ã™ã€‚å††é«˜å±€é¢ã§ã¯éŠ˜æŸ„é¸åˆ¥ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚' },
            { q: 'å¹´æœ«ã«å‘ã‘ã¦ã®è¦‹é€šã—ã¯ï¼Ÿ', a: 'ä¾‹å¹´12æœˆã¯æ©Ÿé–¢æŠ•è³‡å®¶ã®ãƒ‰ãƒ¬ãƒƒã‚·ãƒ³ã‚°è²·ã„ï¼ˆãŠåŒ–ç²§è²·ã„ï¼‰ãŒå…¥ã‚Šã‚„ã™ãã€ä¸Šæ˜‡ã—ã‚„ã™ã„å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚ãŸã ã—ä»Šå¹´ã¯æ—¥éŠ€åˆ©ä¸Šã’è¦³æ¸¬ãŒã‚ã‚Šã€ä¾‹å¹´ã¨ã¯ç•°ãªã‚‹å±•é–‹ã«ãªã‚‹å¯èƒ½æ€§ã‚‚ã€‚' },
          ],
        },
        {
          id: 3,
          category: 'çµŒæ¸ˆæŒ‡æ¨™',
          headline: 'ç”Ÿç”£ãƒ»å°å£²ãƒ»ä½å®…ãŒãã‚ã£ã¦ä¸ŠæŒ¯ã‚Œ',
          summary: '10æœˆã®é‰±å·¥æ¥­ç”Ÿç”£ã€å°å£²å£²ä¸Šé«˜ã€ä½å®…ç€å·¥ãŒã„ãšã‚Œã‚‚å¸‚å ´äºˆæƒ³ã‚’ä¸Šå›ã‚Šã€æ—¥æœ¬çµŒæ¸ˆã®åº•å …ã•ã‚’ç¤ºã™çµæœã¨ãªã£ãŸã€‚',
          why: [
            'é‰±å·¥æ¥­ç”Ÿç”£ã¯å‰æœˆæ¯”+3.0ï¼…ã¨ã€åŠå°ä½“è£½é€ è£…ç½®ã‚„è‡ªå‹•è»ŠãŒç‰½å¼•',
            'å°å£²å£²ä¸Šé«˜ã¯å‰å¹´æ¯”+1.6ï¼…ã§ã€ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰éœ€è¦ã¨è³ƒä¸Šã’åŠ¹æœãŒå¯„ä¸',
            'ä½å®…ç€å·¥ã¯å‰å¹´æ¯”+2.8ï¼…ã¨3ãƒ¶æœˆã¶ã‚Šã®ãƒ—ãƒ©ã‚¹ã€‚ä½é‡‘åˆ©ç¶™ç¶šæœŸå¾…ãŒæ”¯ãˆ',
            'é›‡ç”¨ç’°å¢ƒã‚‚å …èª¿ã§ã€å®Œå…¨å¤±æ¥­ç‡ã¯2.5ï¼…ã¨æ­´å²çš„ä½æ°´æº–ã‚’ç¶­æŒ',
          ],
          tenSecondSummary: 'æ—¥æœ¬çµŒæ¸ˆã¯ç”Ÿç”£ãƒ»æ¶ˆè²»ãƒ»ä½å®…ã®3æŒ‡æ¨™ãŒãã‚ã£ã¦å¥½èª¿ã§ã€æ™¯æ°—ã®åº•å …ã•ãŒç¢ºèªã•ã‚Œã¾ã—ãŸã€‚ç‰¹ã«å¤±æ¥­ç‡2.5ï¼…ã¯ä¸–ç•Œçš„ã«è¦‹ã¦ã‚‚éå¸¸ã«ä½ãã€åŠ´åƒå¸‚å ´ã®å¼·ã•ãŒæ¶ˆè²»ã‚’æ”¯ãˆã¦ã„ã¾ã™ã€‚',
          questions: [
            { q: 'ãªãœæ—¥æœ¬ã®å¤±æ¥­ç‡ã¯ã“ã‚“ãªã«ä½ã„ï¼Ÿ', a: 'å°‘å­é«˜é½¢åŒ–ã«ã‚ˆã‚‹åŠ´åƒåŠ›ä¸è¶³ãŒä¸»å› ã§ã™ã€‚ä¼æ¥­ãŒäººæç¢ºä¿ã«è‹¦åŠ´ã—ã¦ãŠã‚Šã€è§£é›‡ã‚’é¿ã‘ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€æ—¥æœ¬ã®é›‡ç”¨æ…£è¡Œï¼ˆçµ‚èº«é›‡ç”¨ã®åæ®‹ï¼‰ã‚‚å½±éŸ¿ã—ã¦ã„ã¾ã™ã€‚' },
            { q: 'çµŒæ¸ˆæŒ‡æ¨™ãŒè‰¯ã„ã®ã«æ ªãŒä¸‹ãŒã‚‹ã®ã¯ãªãœï¼Ÿ', a: 'çµŒæ¸ˆãŒå¥½èª¿ã ã¨æ—¥éŠ€ãŒåˆ©ä¸Šã’ã—ã‚„ã™ããªã‚‹ãŸã‚ã€ã€Œè‰¯ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒæ‚ªã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚é‡‘èå¸‚å ´ã¯å¸¸ã«å…ˆã‚’èª­ã‚“ã§å‹•ããŸã‚ã€ã“ã®ã‚ˆã†ãªã­ã˜ã‚ŒãŒç”Ÿã˜ã¾ã™ã€‚' },
            { q: 'ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰éœ€è¦ã¯ã¾ã ä¼¸ã³ã‚‹ï¼Ÿ', a: 'å††å®‰åŠ¹æœã‚‚ã‚ã‚Šã€2024å¹´ã®è¨ªæ—¥å®¢æ•°ã¯éå»æœ€é«˜ãƒšãƒ¼ã‚¹ã§ã™ã€‚2025å¹´ã‚‚å¤§é˜ªä¸‡åšãªã©ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚Šã€ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰é–¢é€£éŠ˜æŸ„ã«ã¯è¿½ã„é¢¨ãŒç¶šãè¦‹é€šã—ã§ã™ã€‚' },
          ],
        },
        {
          id: 4,
          category: 'è²¡æ”¿æ”¿ç­–',
          headline: '21.3å…†å††è¦æ¨¡ã®è¿½åŠ çµŒæ¸ˆå¯¾ç­–ã‚’é–£è­°æ±ºå®š',
          summary: 'æ”¿åºœã¯ç‰©ä¾¡é«˜å¯¾ç­–ã‚„è³ƒä¸Šã’æ”¯æ´ã‚’æŸ±ã¨ã™ã‚‹21.3å…†å††è¦æ¨¡ã®çµŒæ¸ˆå¯¾ç­–ã‚’æ±ºå®šã€‚é›»æ°—ãƒ»ã‚¬ã‚¹ä»£è£œåŠ©ã®å»¶é•·ã‚„æ‰€å¾—ç¨æ¸›ç¨ãŒå«ã¾ã‚Œã‚‹ã€‚',
          why: [
            'ç‰©ä¾¡é«˜ã«ã‚ˆã‚‹å®¶è¨ˆè² æ‹…è»½æ¸›ã®ãŸã‚ã€é›»æ°—ãƒ»ã‚¬ã‚¹ä»£è£œåŠ©ã‚’2025å¹´3æœˆã¾ã§å»¶é•·',
            'è³ƒä¸Šã’ã‚’ä¿ƒé€²ã™ã‚‹ä¼æ¥­ã¸ã®ç¨åˆ¶å„ªé‡æªç½®ã‚’æ‹¡å……',
            'åŠå°ä½“ãƒ»AIãªã©æˆé•·åˆ†é‡ã¸ã®æŠ•è³‡æ”¯æ´ã§å›½éš›ç«¶äº‰åŠ›ã‚’å¼·åŒ–',
            'è²¡æºã¯å›½å‚µç™ºè¡ŒãŒä¸­å¿ƒã§ã€è²¡æ”¿æ‚ªåŒ–ã¸ã®æ‡¸å¿µã‚‚æ ¹å¼·ã„',
          ],
          tenSecondSummary: '21å…†å††è¦æ¨¡ã®çµŒæ¸ˆå¯¾ç­–ã§ç‰©ä¾¡é«˜å¯¾ç­–ã¨æˆé•·æŠ•è³‡ã‚’ä¸¡ç«‹ã•ã›ã‚‹æ–¹é‡ã§ã™ã€‚å®¶è¨ˆã«ã¯é›»æ°—ãƒ»ã‚¬ã‚¹ä»£è£œåŠ©å»¶é•·ãŒãƒ—ãƒ©ã‚¹ã§ã™ãŒã€è²¡æ”¿èµ¤å­—ã®æ‹¡å¤§ã¯å††å®‰è¦å› ã«ã‚‚ãªã‚Šã†ã‚‹ãŸã‚ã€é•·æœŸçš„ãªè¦–ç‚¹ã§ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚',
          questions: [
            { q: 'ã“ã®å¯¾ç­–ã§æ™¯æ°—ã¯è‰¯ããªã‚‹ï¼Ÿ', a: 'çŸ­æœŸçš„ã«ã¯æ¶ˆè²»ã‚’ä¸‹æ”¯ãˆã™ã‚‹åŠ¹æœãŒã‚ã‚Šã¾ã™ãŒã€ä¸€æ™‚çš„ãªè£œåŠ©é‡‘ã¯æ ¹æœ¬çš„ãªè§£æ±ºã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚æŒç¶šçš„ãªæˆé•·ã«ã¯è³ƒä¸Šã’ã®å®šç€ã¨ç”Ÿç”£æ€§å‘ä¸ŠãŒå¿…è¦ã§ã™ã€‚' },
            { q: 'è²¡æ”¿èµ¤å­—ãŒã“ã‚“ãªã«å¤§ããã¦å¤§ä¸ˆå¤«ï¼Ÿ', a: 'æ—¥æœ¬å›½å‚µã®9å‰²ä»¥ä¸Šã¯å›½å†…ã§æ¶ˆåŒ–ã•ã‚Œã¦ãŠã‚Šã€ã™ãã«å±æ©Ÿã«ãªã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã—ã€é‡‘åˆ©ä¸Šæ˜‡å±€é¢ã§ã¯åˆ©æ‰•ã„è²»ãŒè†¨ã‚‰ã‚€ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã€é•·æœŸçš„ã«ã¯è²¡æ”¿å¥å…¨åŒ–ãŒèª²é¡Œã§ã™ã€‚' },
            { q: 'å¸‚å ´ã¸ã®å½±éŸ¿ã¯ï¼Ÿ', a: 'å›½å‚µå¢—ç™ºã¯é‡‘åˆ©ä¸Šæ˜‡åœ§åŠ›ã«ãªã‚Šã¾ã™ãŒã€æ—¥éŠ€ãŒå›½å‚µã‚’è²·ã„æ”¯ãˆã¦ã„ã‚‹é–“ã¯å½±éŸ¿ã¯é™å®šçš„ã§ã™ã€‚ãŸã ã—ã€æ ¼ä»˜ã‘ä¼šç¤¾ãŒæ—¥æœ¬å›½å‚µã‚’æ ¼ä¸‹ã’ã™ã‚Œã°ã€å††å®‰ãƒ»æ ªå®‰ã®ãã£ã‹ã‘ã«ãªã‚‹å¯èƒ½æ€§ã‚‚ã€‚' },
          ],
        },
        {
          id: 5,
          category: 'å›½éš›é‡‘è',
          headline: 'MASãƒ»æ—¥éŠ€ã®é€šè²¨ã‚¹ãƒ¯ãƒƒãƒ—å”å®šã‚’3å¹´å»¶é•·',
          summary: 'ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«é‡‘èç®¡ç†å±€ï¼ˆMASï¼‰ã¨æ—¥æœ¬éŠ€è¡Œã¯ã€äºŒå›½é–“é€šè²¨ã‚¹ãƒ¯ãƒƒãƒ—å”å®šã‚’3å¹´é–“å»¶é•·ã™ã‚‹ã“ã¨ã§åˆæ„ã€‚ã‚¢ã‚¸ã‚¢é‡‘èã®å®‰å®šã«å¯„ä¸ã€‚',
          why: [
            'é€šè²¨ã‚¹ãƒ¯ãƒƒãƒ—ã¯é‡‘èå±æ©Ÿæ™‚ã«å¤–è²¨ã‚’èé€šã—åˆã†ã€Œä¿é™ºã€ã®ã‚ˆã†ãªä»•çµ„ã¿',
            'ç±³ãƒ‰ãƒ«ä¾å­˜ã‚’æ¸›ã‚‰ã—ã€ã‚¢ã‚¸ã‚¢åŸŸå†…ã®é‡‘èå®‰å®šã‚’å¼·åŒ–ã™ã‚‹ç‹™ã„',
            'ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ã¯ã‚¢ã‚¸ã‚¢ã®é‡‘èãƒãƒ–ã§ã€æ—¥æœ¬ã¨ã®çµŒæ¸ˆé–¢ä¿‚ã‚‚æ·±ã„',
            'åœ°æ”¿å­¦ãƒªã‚¹ã‚¯ã®é«˜ã¾ã‚Šã‚’å—ã‘ã€ã‚¢ã‚¸ã‚¢è«¸å›½é–“ã®é‡‘èå”åŠ›ãŒåŠ é€Ÿ',
          ],
          tenSecondSummary: 'æ—¥æœ¬ã¨ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ã®é€šè²¨ã‚¹ãƒ¯ãƒƒãƒ—å»¶é•·ã¯ã€ã‚¢ã‚¸ã‚¢ã®é‡‘èå®‰å®šã«å‘ã‘ãŸå”åŠ›ã®ä¸€ç’°ã§ã™ã€‚ä¸‡ãŒä¸€ã®é‡‘èå±æ©Ÿã«å‚™ãˆã‚‹ã€Œä¿é™ºã€ã§ã‚ã‚Šã€æ™®æ®µã¯ä½¿ã‚ã‚Œã¾ã›ã‚“ãŒã€ã‚ã‚‹ã“ã¨ã§å¸‚å ´ã®å®‰å¿ƒæ„Ÿã«ã¤ãªãŒã‚Šã¾ã™ã€‚',
          questions: [
            { q: 'é€šè²¨ã‚¹ãƒ¯ãƒƒãƒ—ã£ã¦å…·ä½“çš„ã«ä½•ï¼Ÿ', a: 'äºŒå›½é–“ã§é€šè²¨ã‚’ä¸€æ™‚çš„ã«äº¤æ›ã™ã‚‹å–ã‚Šæ±ºã‚ã§ã™ã€‚ä¾‹ãˆã°æ—¥æœ¬ãŒå¤–è²¨ä¸è¶³ã«ãªã£ãŸæ™‚ã€ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ãƒ‰ãƒ«ã‚’å€Ÿã‚Šã¦å¸‚å ´ã§å£²ã‚Šã€å¿…è¦ãªé€šè²¨ã‚’èª¿é”ã§ãã¾ã™ã€‚è¿”æ¸ˆæ™‚ã«å…ƒã®é€šè²¨ã§è¿”ã—ã¾ã™ã€‚' },
            { q: 'ãªãœã‚¢ã‚¸ã‚¢è«¸å›½ã¨çµã‚“ã§ã„ã‚‹ã®ï¼Ÿ', a: '1997å¹´ã®ã‚¢ã‚¸ã‚¢é€šè²¨å±æ©Ÿã®æ•™è¨“ã‹ã‚‰ã€ã‚¢ã‚¸ã‚¢åŸŸå†…ã§åŠ©ã‘åˆã†ä»•çµ„ã¿ãŒæ•´å‚™ã•ã‚Œã¾ã—ãŸã€‚ç±³ãƒ‰ãƒ«ã«é ¼ã‚Šã™ãã‚‹ã¨ã€ç±³å›½ã®é‡‘èæ”¿ç­–ã«æŒ¯ã‚Šå›ã•ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ãŸã‚ã§ã™ã€‚' },
            { q: 'æ—¥æœ¬ã«ã¨ã£ã¦ã®ãƒ¡ãƒªãƒƒãƒˆã¯ï¼Ÿ', a: 'ç›´æ¥çš„ãªãƒ¡ãƒªãƒƒãƒˆã¯å±æ©Ÿæ™‚ã®å¤–è²¨èª¿é”ã§ã™ãŒã€ãã‚Œä»¥ä¸Šã«ã€Œæ—¥æœ¬å††ã®å›½éš›çš„ãªä¿¡é ¼æ€§å‘ä¸Šã€ã¨ã€Œã‚¢ã‚¸ã‚¢ã«ãŠã‘ã‚‹é‡‘èé¢ã§ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹å¼·åŒ–ã€ã¨ã„ã†æˆ¦ç•¥çš„æ„ç¾©ãŒã‚ã‚Šã¾ã™ã€‚' },
          ],
        },
      ],
    };

    // ========== AIè³ªå•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ==========
    const AIQuestionSection = ({ topic }) => {
      const [question, setQuestion] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const [conversations, setConversations] = useState([]);

      const handleSubmit = async () => {
        if (!question.trim() || isLoading) return;

        const userQuestion = question.trim();
        setQuestion('');
        setIsLoading(true);

        setConversations(prev => [...prev, { type: 'user', text: userQuestion }]);

        try {
          const response = await fetch("https://api.anthropic.com/v1/messages", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              model: "claude-sonnet-4-20250514",
              max_tokens: 500,
              messages: [{
                role: "user",
                content: `ã‚ãªãŸã¯é‡‘èãƒ‹ãƒ¥ãƒ¼ã‚¹è§£èª¬ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€Œzacqã€ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã«ã¤ã„ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè³ªå•ã—ã¦ã„ã¾ã™ã€‚

ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‘
ã‚«ãƒ†ã‚´ãƒª: ${topic.category}
ãƒ˜ãƒƒãƒ‰ãƒ©ã‚¤ãƒ³: ${topic.headline}
æ¦‚è¦: ${topic.summary}
èƒŒæ™¯:
${topic.why.map((w, i) => `${i + 1}. ${w}`).join('\n')}

ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã€‘
${userQuestion}

ã€å›ç­”ãƒ«ãƒ¼ãƒ«ã€‘
- 2ã€œ4æ–‡ã§ç°¡æ½”ã«å›ç­”ã—ã¦ãã ã•ã„
- å°‚é–€ç”¨èªã¯é¿ã‘ã€ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã—ã¦ãã ã•ã„
- æŠ•è³‡åˆ¤æ–­ã«é–¢ã™ã‚‹è³ªå•ï¼ˆã€Œè²·ã†ã¹ãã‹ã€ã€Œå£²ã‚‹ã¹ãã‹ã€ãªã©ï¼‰ã«ã¯ã€ŒæŠ•è³‡åˆ¤æ–­ã«ã¤ã„ã¦ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€ã¨ä¼ãˆã¦ãã ã•ã„
- æ—¥æœ¬èªã§å›ç­”ã—ã¦ãã ã•ã„`
              }]
            })
          });

          const data = await response.json();
          const aiResponse = data.content[0].text;
          setConversations(prev => [...prev, { type: 'ai', text: aiResponse }]);
        } catch (error) {
          console.error('API Error:', error);
          setConversations(prev => [...prev, { type: 'ai', text: 'ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚å›ç­”ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚' }]);
        } finally {
          setIsLoading(false);
        }
      };

      return (
        <div style={{
          background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%)',
          borderRadius: '12px',
          padding: '16px',
          marginBottom: '20px',
          border: '1px solid rgba(139, 92, 246, 0.2)',
        }}>
          <h4 style={{ fontSize: '13px', fontWeight: '600', color: 'var(--accent-purple)', marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '6px' }}>
            ğŸ’¬ AIã«è³ªå•ã™ã‚‹
          </h4>

          {conversations.length > 0 && (
            <div style={{ marginBottom: '12px', display: 'flex', flexDirection: 'column', gap: '8px' }}>
              {conversations.map((conv, i) => (
                <div key={i}>
                  {conv.type === 'user' ? (
                    <div style={{ alignSelf: 'flex-end', background: 'var(--accent-blue)', borderRadius: '10px 10px 4px 10px', padding: '8px 12px', marginLeft: '20%', fontSize: '13px', lineHeight: '1.5' }}>{conv.text}</div>
                  ) : (
                    <div style={{ background: 'var(--bg-card)', borderRadius: '10px 10px 10px 4px', padding: '10px 12px', marginRight: '10%', border: '1px solid var(--border-color)' }}>
                      <div style={{ fontSize: '10px', fontWeight: '600', color: 'var(--accent-purple)', marginBottom: '4px' }}>
                        <span style={{ fontFamily: 'DM Sans' }}>zac<span style={{ color: 'var(--accent-red)' }}>q</span></span> ã‹ã‚‰ã®å›ç­”
                      </div>
                      <p style={{ fontSize: '13px', color: 'var(--text-primary)', lineHeight: '1.6' }}>{conv.text}</p>
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}

          {isLoading && (
            <div style={{ background: 'var(--bg-card)', borderRadius: '10px', padding: '10px 12px', marginBottom: '12px', border: '1px solid var(--border-color)', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div className="spinner" />
              <span style={{ fontSize: '13px', color: 'var(--text-muted)' }}>è€ƒãˆä¸­â€¦</span>
            </div>
          )}

          <div style={{ display: 'flex', gap: '8px' }}>
            <input
              type="text"
              value={question}
              onChange={(e) => setQuestion(e.target.value)}
              onKeyPress={(e) => e.key === 'Enter' && handleSubmit()}
              placeholder="AIã«è³ªå•..."
              style={{
                flex: 1,
                background: 'var(--bg-card)',
                border: '1px solid var(--border-color)',
                borderRadius: '10px',
                padding: '10px 12px',
                color: 'var(--text-primary)',
                fontSize: '13px',
                outline: 'none',
                minWidth: 0,
              }}
            />
            <button
              onClick={handleSubmit}
              disabled={!question.trim() || isLoading}
              style={{
                background: question.trim() && !isLoading ? 'var(--gradient-1)' : 'var(--bg-secondary)',
                border: 'none',
                borderRadius: '10px',
                padding: '10px 14px',
                color: question.trim() && !isLoading ? 'white' : 'var(--text-muted)',
                fontSize: '13px',
                fontWeight: '600',
                cursor: question.trim() && !isLoading ? 'pointer' : 'not-allowed',
                whiteSpace: 'nowrap',
                flexShrink: 0,
              }}
            >
              è³ªå•
            </button>
          </div>

          <p style={{ fontSize: '10px', color: 'var(--text-muted)', marginTop: '8px' }}>â€»æŠ•è³‡åˆ¤æ–­ã«ã¯ãŠç­”ãˆã—ã¾ã›ã‚“ã€‚</p>
        </div>
      );
    };

    // ========== ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚° ==========
    const Onboarding = ({ onComplete, onSkip }) => {
      const [step, setStep] = useState(1);
      const [data, setData] = useState({ jobType: '', purposes: [], commitDays: '', notifications: true });
      const totalSteps = 6;

      const jobTypes = [
        { id: 'bank', label: 'éŠ€è¡Œï¼ˆãƒªãƒ†ãƒ¼ãƒ«ãƒ»æ³•äººï¼‰', icon: 'ğŸ¦' },
        { id: 'securities', label: 'è¨¼åˆ¸ä¼šç¤¾ãƒ»IFA', icon: 'ğŸ“ˆ' },
        { id: 'asset', label: 'è³‡ç”£é‹ç”¨ãƒ»æŠ•ä¿¡ãƒ»ã‚¢ãƒŠãƒªã‚¹ãƒˆ', icon: 'ğŸ“Š' },
        { id: 'insurance', label: 'ä¿é™ºãƒ»é‡‘èå•†å“å–¶æ¥­', icon: 'ğŸ›¡ï¸' },
        { id: 'other', label: 'ãã®ä»–ã®ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ã‚½ãƒ³', icon: 'ğŸ’¼' },
      ];

      const purposes = [
        { id: 'time', label: 'æœã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆæ™‚é–“ã‚’çŸ­ç¸®ã—ãŸã„', icon: 'â±ï¸' },
        { id: 'understand', label: 'ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®èƒŒæ™¯ã¾ã§ç†è§£ã—ãŸã„', icon: 'ğŸ§ ' },
        { id: 'customer', label: 'é¡§å®¢ã¨ã®ä¼šè©±ã§ä½¿ã„ãŸã„', icon: 'ğŸ’¬' },
        { id: 'boss', label: 'ä¸Šå¸ã‹ã‚‰ã®è³ªå•ã«å‚™ãˆãŸã„', icon: 'ğŸ‘”' },
        { id: 'knowledge', label: 'é‡‘èçŸ¥è­˜ã‚’æ·±ã‚ãŸã„', icon: 'ğŸ“š' },
      ];

      const commitOptions = [
        { id: '1', label: 'é€±1æ—¥', desc: 'ã‚†ã‚‹ãã‚¹ã‚¿ãƒ¼ãƒˆ' },
        { id: '3', label: 'é€±3æ—¥', desc: 'ãŠã™ã™ã‚', recommended: true },
        { id: '5', label: 'é€±5æ—¥', desc: 'å¹³æ—¥ã¯æ¯æ—¥' },
        { id: '7', label: 'æ¯æ—¥', desc: 'ã—ã£ã‹ã‚Šç¿’æ…£åŒ–' },
      ];

      const handleNext = () => { if (step < totalSteps) setStep(step + 1); };
      const handleBack = () => { if (step > 1) setStep(step - 1); };
      const togglePurpose = (id) => {
        setData(prev => ({ ...prev, purposes: prev.purposes.includes(id) ? prev.purposes.filter(p => p !== id) : [...prev.purposes, id] }));
      };

      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)', display: 'flex', flexDirection: 'column' }}>
          <div style={{ padding: '20px 20px 16px', borderBottom: '1px solid var(--border-color)' }}>
            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '12px' }}>
              <h1 style={{ fontFamily: 'DM Sans', fontSize: '18px', fontWeight: '700' }}>zac<span style={{ color: 'var(--accent-red)' }}>q</span></h1>
              <div style={{ display: 'flex', alignItems: 'baseline', gap: '4px' }}>
                <span style={{ fontSize: '24px', fontWeight: '700', fontFamily: 'DM Sans', color: 'var(--accent-blue)' }}>{step}</span>
                <span style={{ fontSize: '14px', color: 'var(--text-muted)' }}>/ {totalSteps}</span>
              </div>
            </div>
            <div style={{ height: '5px', background: 'var(--bg-card)', borderRadius: '3px', overflow: 'hidden' }}>
              <div style={{ height: '100%', width: `${(step / totalSteps) * 100}%`, background: 'var(--gradient-1)', transition: 'width 0.3s ease' }} />
            </div>
          </div>

          <div style={{ flex: 1, display: 'flex', flexDirection: 'column', padding: '24px 20px', maxWidth: '500px', margin: '0 auto', width: '100%' }}>
            {step === 1 && (
              <div style={{ textAlign: 'center', paddingTop: '20px' }}>
                <div style={{ fontFamily: 'DM Sans', fontSize: '42px', fontWeight: '700', marginBottom: '20px' }}>zac<span style={{ color: 'var(--accent-red)' }}>q</span></div>
                <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '12px', lineHeight: '1.4', color: 'var(--accent-cyan)' }}>ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã‚€æ™‚ä»£ã‹ã‚‰ã€<br />ãƒ‹ãƒ¥ãƒ¼ã‚¹ã«è³ªå•ã™ã‚‹æ™‚ä»£ã¸ã€‚</h2>
                <p style={{ fontSize: '14px', color: 'var(--text-secondary)', lineHeight: '1.7', marginBottom: '32px' }}>æ¯æœ3åˆ†ã§ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®è§£åƒåº¦ã‚’ã‚ã’ã‚‹ã€‚<br />ã‚ãªãŸã«å¯„ã‚Šæ·»ã£ãŸæ–°ã—ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ã‚«ã‚¿ãƒ</p>
                <button onClick={handleNext} style={{ width: '100%', background: 'var(--gradient-1)', border: 'none', borderRadius: '12px', padding: '14px', color: 'white', fontSize: '15px', fontWeight: '600', cursor: 'pointer', marginBottom: '10px' }}>ã¯ã˜ã‚ã‚‹</button>
                <button onClick={onSkip} style={{ background: 'none', border: 'none', color: 'var(--text-muted)', fontSize: '13px', cursor: 'pointer', padding: '8px' }}>ã‚ã¨ã§è¨­å®šã™ã‚‹</button>
              </div>
            )}

            {step === 2 && (
              <div>
                <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '6px' }}>ã‚ãªãŸã®è·ç¨®ã¯ï¼Ÿ</h2>
                <p style={{ fontSize: '13px', color: 'var(--text-muted)', marginBottom: '20px' }}>æœ€é©ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãŠå±Šã‘ã—ã¾ã™</p>
                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                  {jobTypes.map(job => (
                    <button key={job.id} onClick={() => setData({ ...data, jobType: job.id })} style={{ background: data.jobType === job.id ? 'var(--accent-blue)' : 'var(--bg-card)', border: '1px solid ' + (data.jobType === job.id ? 'var(--accent-blue)' : 'var(--border-color)'), borderRadius: '10px', padding: '14px 16px', color: 'var(--text-primary)', fontSize: '14px', fontWeight: '500', cursor: 'pointer', textAlign: 'left', display: 'flex', alignItems: 'center', gap: '10px' }}>
                      <span style={{ fontSize: '18px' }}>{job.icon}</span>{job.label}
                    </button>
                  ))}
                </div>
              </div>
            )}

            {step === 3 && (
              <div>
                <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '6px' }}>zacqã‚’ä½¿ã†ç›®çš„ã¯ï¼Ÿ</h2>
                <p style={{ fontSize: '13px', color: 'var(--text-muted)', marginBottom: '20px' }}>è¤‡æ•°é¸æŠã§ãã¾ã™</p>
                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                  {purposes.map(purpose => (
                    <button key={purpose.id} onClick={() => togglePurpose(purpose.id)} style={{ background: data.purposes.includes(purpose.id) ? 'var(--accent-blue)' : 'var(--bg-card)', border: '1px solid ' + (data.purposes.includes(purpose.id) ? 'var(--accent-blue)' : 'var(--border-color)'), borderRadius: '10px', padding: '14px 16px', color: 'var(--text-primary)', fontSize: '14px', fontWeight: '500', cursor: 'pointer', textAlign: 'left', display: 'flex', alignItems: 'center', gap: '10px' }}>
                      <span style={{ fontSize: '18px' }}>{purpose.icon}</span>{purpose.label}{data.purposes.includes(purpose.id) && <span style={{ marginLeft: 'auto' }}>âœ“</span>}
                    </button>
                  ))}
                </div>
              </div>
            )}

            {step === 4 && (
              <div>
                <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '6px' }}>é€±ã«ä½•æ—¥ãƒã‚§ãƒƒã‚¯ã™ã‚‹ï¼Ÿ</h2>
                <p style={{ fontSize: '13px', color: 'var(--text-muted)', marginBottom: '20px' }}>ç¿’æ…£åŒ–ã®ç›®æ¨™ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†</p>
                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px' }}>
                  {commitOptions.map(opt => (
                    <button key={opt.id} onClick={() => setData({ ...data, commitDays: opt.id })} style={{ background: data.commitDays === opt.id ? 'var(--accent-blue)' : 'var(--bg-card)', border: opt.recommended ? '2px solid ' + (data.commitDays === opt.id ? 'var(--accent-blue)' : 'var(--accent-emerald)') : '1px solid ' + (data.commitDays === opt.id ? 'var(--accent-blue)' : 'var(--border-color)'), borderRadius: '10px', padding: '16px 12px', color: 'var(--text-primary)', cursor: 'pointer', textAlign: 'center', position: 'relative' }}>
                      {opt.recommended && <span style={{ position: 'absolute', top: '-8px', left: '50%', transform: 'translateX(-50%)', background: 'var(--accent-emerald)', padding: '2px 8px', borderRadius: '8px', fontSize: '10px', fontWeight: '600' }}>ãŠã™ã™ã‚</span>}
                      <div style={{ fontSize: '20px', fontWeight: '700', marginBottom: '2px' }}>{opt.label}</div>
                      <div style={{ fontSize: '11px', color: 'var(--text-muted)' }}>{opt.desc}</div>
                    </button>
                  ))}
                </div>
              </div>
            )}

            {step === 5 && (
              <div style={{ textAlign: 'center' }}>
                <div style={{ fontSize: '56px', marginBottom: '20px' }}>ğŸ””</div>
                <h2 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '6px' }}>é€šçŸ¥ã‚’å—ã‘å–ã‚‹ï¼Ÿ</h2>
                <p style={{ fontSize: '13px', color: 'var(--text-muted)', marginBottom: '24px' }}>ä»Šæ—¥ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’ãŠå±Šã‘ã—ã¾ã™</p>
                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                  <button onClick={() => setData({ ...data, notifications: true })} style={{ background: data.notifications ? 'var(--accent-blue)' : 'var(--bg-card)', border: '1px solid ' + (data.notifications ? 'var(--accent-blue)' : 'var(--border-color)'), borderRadius: '10px', padding: '14px', color: 'var(--text-primary)', fontSize: '15px', fontWeight: '600', cursor: 'pointer' }}>ğŸ”” é€šçŸ¥ã‚’ã‚ªãƒ³ã«ã™ã‚‹</button>
                  <button onClick={() => setData({ ...data, notifications: false })} style={{ background: !data.notifications ? 'var(--accent-blue)' : 'var(--bg-card)', border: '1px solid ' + (!data.notifications ? 'var(--accent-blue)' : 'var(--border-color)'), borderRadius: '10px', padding: '14px', color: 'var(--text-primary)', fontSize: '15px', fontWeight: '600', cursor: 'pointer' }}>ğŸ”• é€šçŸ¥ãªã—ã§ä½¿ã†</button>
                </div>
              </div>
            )}

            {step === 6 && (
              <div style={{ textAlign: 'center' }}>
                <div style={{ fontSize: '56px', marginBottom: '20px' }}>ğŸ‰</div>
                <h2 style={{ fontSize: '22px', fontWeight: '700', marginBottom: '12px' }}>æº–å‚™ãŒã§ãã¾ã—ãŸï¼</h2>
                <p style={{ fontSize: '14px', color: 'var(--text-secondary)', marginBottom: '24px', lineHeight: '1.7' }}>ã“ã‚Œã‹ã‚‰æ¯æœ3åˆ†ã€<br />zacqã§ã€Œèª¬æ˜ã§ãã‚‹è‡ªåˆ†ã€ã«ãªã‚Šã¾ã—ã‚‡ã†ã€‚</p>
                <div style={{ background: 'var(--bg-card)', borderRadius: '12px', padding: '16px', marginBottom: '24px', textAlign: 'left' }}>
                  <h3 style={{ fontSize: '12px', color: 'var(--text-muted)', marginBottom: '10px' }}>ã‚ãªãŸã®è¨­å®š</h3>
                  <div style={{ fontSize: '13px', color: 'var(--text-secondary)', lineHeight: '1.8' }}>
                    <div>è·ç¨®: {jobTypes.find(j => j.id === data.jobType)?.label || 'æœªè¨­å®š'}</div>
                    <div>ç›®æ¨™: é€±{data.commitDays}æ—¥</div>
                    <div>é€šçŸ¥: {data.notifications ? 'ã‚ªãƒ³' : 'ã‚ªãƒ•'}</div>
                  </div>
                </div>
                <button onClick={() => onComplete(data)} style={{ width: '100%', background: 'var(--gradient-1)', border: 'none', borderRadius: '12px', padding: '14px', color: 'white', fontSize: '15px', fontWeight: '600', cursor: 'pointer' }}>ä»Šæ—¥ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¦‹ã‚‹ â†’</button>
              </div>
            )}

            {step > 1 && step < 6 && (
              <div style={{ marginTop: 'auto', paddingTop: '24px', display: 'flex', gap: '10px' }}>
                <button onClick={handleBack} style={{ flex: 1, background: 'var(--bg-card)', border: '1px solid var(--border-color)', borderRadius: '10px', padding: '12px', color: 'var(--text-primary)', fontSize: '14px', fontWeight: '500', cursor: 'pointer' }}>æˆ»ã‚‹</button>
                <button onClick={handleNext} disabled={(step === 2 && !data.jobType) || (step === 3 && data.purposes.length === 0) || (step === 4 && !data.commitDays)} style={{ flex: 2, background: 'var(--gradient-1)', border: 'none', borderRadius: '10px', padding: '12px', color: 'white', fontSize: '14px', fontWeight: '600', cursor: 'pointer', opacity: ((step === 2 && !data.jobType) || (step === 3 && data.purposes.length === 0) || (step === 4 && !data.commitDays)) ? 0.5 : 1 }}>æ¬¡ã¸</button>
              </div>
            )}
          </div>
        </div>
      );
    };

    // ========== è¨­å®šãƒšãƒ¼ã‚¸ ==========
    const SettingsPage = ({ profile, setProfile, onClose, onReset }) => {
      const [localProfile, setLocalProfile] = useState(profile);
      const [showResetConfirm, setShowResetConfirm] = useState(false);
      const jobTypes = [
        { id: 'bank', label: 'éŠ€è¡Œï¼ˆãƒªãƒ†ãƒ¼ãƒ«ãƒ»æ³•äººï¼‰' },
        { id: 'securities', label: 'è¨¼åˆ¸ä¼šç¤¾ãƒ»IFA' },
        { id: 'asset', label: 'è³‡ç”£é‹ç”¨ãƒ»æŠ•ä¿¡ãƒ»ã‚¢ãƒŠãƒªã‚¹ãƒˆ' },
        { id: 'insurance', label: 'ä¿é™ºãƒ»é‡‘èå•†å“å–¶æ¥­' },
        { id: 'other', label: 'ãã®ä»–ã®ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ã‚½ãƒ³' },
      ];
      const handleSave = () => { setProfile(localProfile); onClose(); };
      const handleReset = () => { localStorage.clear(); onReset(); };

      return (
        <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'var(--bg-primary)', zIndex: 300, overflow: 'auto' }}>
          <div style={{ padding: '14px 20px', borderBottom: '1px solid var(--border-color)', display: 'flex', alignItems: 'center', justifyContent: 'space-between', position: 'sticky', top: 0, background: 'var(--bg-primary)' }}>
            <button onClick={onClose} style={{ background: 'none', border: 'none', color: 'var(--text-primary)', fontSize: '14px', cursor: 'pointer' }}>â† æˆ»ã‚‹</button>
            <h1 style={{ fontSize: '16px', fontWeight: '600' }}>è¨­å®š</h1>
            <button onClick={handleSave} style={{ background: 'var(--accent-blue)', border: 'none', borderRadius: '6px', padding: '6px 12px', color: 'white', fontSize: '13px', fontWeight: '600', cursor: 'pointer' }}>ä¿å­˜</button>
          </div>
          <div style={{ padding: '20px', maxWidth: '500px', margin: '0 auto' }}>
            <section style={{ marginBottom: '24px' }}>
              <h2 style={{ fontSize: '12px', fontWeight: '600', color: 'var(--text-muted)', marginBottom: '12px' }}>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
              <div style={{ background: 'var(--bg-card)', borderRadius: '12px', padding: '16px', border: '1px solid var(--border-color)' }}>
                <div style={{ marginBottom: '12px' }}>
                  <label style={{ display: 'block', fontSize: '12px', color: 'var(--text-muted)', marginBottom: '6px' }}>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ </label>
                  <input type="text" value={localProfile.name} onChange={(e) => setLocalProfile({ ...localProfile, name: e.target.value })} placeholder="ä¾‹ï¼šç”°ä¸­" style={{ width: '100%', background: 'var(--bg-secondary)', border: '1px solid var(--border-color)', borderRadius: '8px', padding: '10px 12px', color: 'var(--text-primary)', fontSize: '14px', outline: 'none' }} />
                </div>
                <div>
                  <label style={{ display: 'block', fontSize: '12px', color: 'var(--text-muted)', marginBottom: '6px' }}>è·ç¨®</label>
                  <select value={localProfile.jobType} onChange={(e) => setLocalProfile({ ...localProfile, jobType: e.target.value })} style={{ width: '100%', background: 'var(--bg-secondary)', border: '1px solid var(--border-color)', borderRadius: '8px', padding: '10px 12px', color: 'var(--text-primary)', fontSize: '14px', outline: 'none' }}>
                    {jobTypes.map(job => <option key={job.id} value={job.id}>{job.label}</option>)}
                  </select>
                </div>
              </div>
            </section>
            <section>
              <h2 style={{ fontSize: '12px', fontWeight: '600', color: 'var(--text-muted)', marginBottom: '12px' }}>ãã®ä»–</h2>
              <div style={{ background: 'var(--bg-card)', borderRadius: '12px', border: '1px solid var(--border-color)', overflow: 'hidden' }}>
                <button onClick={() => setShowResetConfirm(true)} style={{ width: '100%', background: 'none', border: 'none', padding: '14px 16px', color: 'var(--accent-rose)', fontSize: '14px', textAlign: 'left', cursor: 'pointer' }}>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ</button>
              </div>
            </section>
          </div>
          {showResetConfirm && (
            <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0,0,0,0.8)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 400, padding: '20px' }}>
              <div style={{ background: 'var(--bg-card)', borderRadius: '16px', padding: '20px', maxWidth: '300px', width: '100%', textAlign: 'center' }}>
                <div style={{ fontSize: '40px', marginBottom: '12px' }}>âš ï¸</div>
                <h3 style={{ fontSize: '16px', fontWeight: '700', marginBottom: '6px' }}>ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ</h3>
                <p style={{ fontSize: '13px', color: 'var(--text-muted)', marginBottom: '20px' }}>ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚</p>
                <div style={{ display: 'flex', gap: '10px' }}>
                  <button onClick={() => setShowResetConfirm(false)} style={{ flex: 1, background: 'var(--bg-secondary)', border: '1px solid var(--border-color)', borderRadius: '10px', padding: '12px', color: 'var(--text-primary)', fontSize: '14px', fontWeight: '600', cursor: 'pointer' }}>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                  <button onClick={handleReset} style={{ flex: 1, background: 'var(--accent-rose)', border: 'none', borderRadius: '10px', padding: '12px', color: 'white', fontSize: '14px', fontWeight: '600', cursor: 'pointer' }}>ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    // ========== ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆç‰ˆï¼‰ ==========
    const Header = ({ onSettingsClick }) => (
      <header style={{ background: 'var(--bg-primary)', borderBottom: '1px solid var(--border-color)', padding: '12px 16px', position: 'sticky', top: 0, zIndex: 100 }}>
        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
          <div>
            <h1 style={{ fontFamily: 'DM Sans', fontSize: '22px', fontWeight: '700' }}>zac<span style={{ color: 'var(--accent-red)' }}>q</span></h1>
            <p style={{ fontSize: '10px', color: 'var(--text-muted)', marginTop: '2px' }}>3åˆ†ã§ãƒãƒ¼ã‚±ãƒƒãƒˆã‚’ç†è§£ã™ã‚‹</p>
          </div>
          <button onClick={onSettingsClick} style={{ background: 'none', border: '2px solid white', borderRadius: '50%', width: '32px', height: '32px', display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer', padding: 0 }}>
            <span style={{ fontSize: '16px' }}>ğŸ‘¤</span>
          </button>
        </div>
      </header>
    );

    // ========== ãƒãƒ¼ã‚±ãƒƒãƒˆæ¦‚æ³ï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆç‰ˆï¼‰ ==========
    const MarketOverview = ({ indices, date, topics }) => (
      <section style={{ background: 'var(--bg-secondary)', borderRadius: '16px', padding: '16px', marginBottom: '20px', border: '1px solid var(--border-color)' }}>
        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>
          <h2 style={{ fontSize: '11px', fontWeight: '600', color: 'var(--text-muted)', letterSpacing: '0.5px' }}>æœ¬æ—¥ã®ãƒãƒ¼ã‚±ãƒƒãƒˆ</h2>
          <span style={{ fontSize: '11px', color: 'var(--text-secondary)' }}>{date}</span>
        </div>
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '8px', marginBottom: '12px' }}>
          {indices.map((idx, i) => (
            <div key={i} style={{ background: 'var(--bg-card)', borderRadius: '8px', padding: '10px 8px', border: '1px solid var(--border-color)' }}>
              <p style={{ fontSize: '9px', color: 'var(--text-muted)', marginBottom: '2px', fontWeight: '500' }}>{idx.name}</p>
              <p style={{ fontSize: '12px', fontWeight: '700', fontFamily: 'DM Sans', marginBottom: '2px' }}>{idx.value}</p>
              <span style={{ fontSize: '10px', fontWeight: '600', color: idx.trend === 'up' ? 'var(--accent-emerald)' : 'var(--accent-rose)' }}>{idx.trend === 'up' ? 'â–²' : 'â–¼'} {idx.change}</span>
            </div>
          ))}
        </div>
        <div style={{ display: 'flex', justifyContent: 'flex-end', marginBottom: '12px' }}>
          <button style={{ background: 'var(--bg-card)', border: '1px solid var(--border-color)', borderRadius: '6px', padding: '6px 10px', color: 'var(--text-muted)', fontSize: '10px', fontWeight: '500', cursor: 'pointer' }}>âš™ï¸ ã‚«ã‚¹ã‚¿ãƒ </button>
        </div>
        <div style={{ borderTop: '1px solid var(--border-color)', paddingTop: '12px' }}>
          <h3 style={{ fontSize: '11px', fontWeight: '600', color: 'var(--text-muted)', marginBottom: '10px' }}>ğŸ“° ä»Šæ—¥ã®ãƒˆãƒ”ãƒƒã‚¯ï¼ˆ{topics.length}ä»¶ï¼‰</h3>
          <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>
            {topics.map(topic => (
              <a key={topic.id} href={`#topic-${topic.id}`} style={{ display: 'flex', alignItems: 'center', gap: '10px', padding: '10px 12px', background: 'var(--bg-card)', borderRadius: '8px', border: '1px solid var(--border-color)', textDecoration: 'none', color: 'var(--text-primary)' }}>
                <span style={{ fontSize: '9px', fontWeight: '600', color: 'var(--text-muted)', background: 'var(--bg-secondary)', padding: '3px 6px', borderRadius: '4px', flexShrink: 0 }}>{topic.category}</span>
                <span style={{ fontSize: '12px', fontWeight: '500', flex: 1, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{topic.headline}</span>
                <span style={{ color: 'var(--text-muted)', fontSize: '12px' }}>â†’</span>
              </a>
            ))}
          </div>
        </div>
      </section>
    );

    // ========== ãƒˆãƒ”ãƒƒã‚¯ã‚«ãƒ¼ãƒ‰ ==========
    const TopicCard = ({ topic, onUnderstand }) => {
      const [expandedQ, setExpandedQ] = useState(null);
      const [understood, setUnderstood] = useState(null);

      const categoryColors = {
        'é‡‘èæ”¿ç­–': 'var(--accent-blue)',
        'æ—¥æœ¬æ ª': 'var(--accent-rose)',
        'çµŒæ¸ˆæŒ‡æ¨™': 'var(--accent-emerald)',
        'è²¡æ”¿æ”¿ç­–': 'var(--accent-amber)',
        'å›½éš›é‡‘è': 'var(--accent-purple)',
      };

      return (
        <article id={`topic-${topic.id}`} style={{ background: 'var(--bg-card)', borderRadius: '16px', border: '1px solid var(--border-color)', overflow: 'hidden', marginBottom: '16px', scrollMarginTop: '80px' }}>
          <div style={{ background: categoryColors[topic.category] || 'var(--accent-blue)', padding: '6px 16px', fontSize: '11px', fontWeight: '600' }}>{topic.category}</div>
          
          <div style={{ padding: '16px' }}>
            <h3 style={{ fontSize: '18px', fontWeight: '700', marginBottom: '10px', lineHeight: '1.4' }}>{topic.headline}</h3>
            <p style={{ fontSize: '13px', color: 'var(--text-secondary)', marginBottom: '16px', lineHeight: '1.7' }}>{topic.summary}</p>
            
            {/* WHY */}
            <div style={{ background: 'var(--bg-secondary)', borderRadius: '12px', padding: '14px', marginBottom: '16px', border: '1px solid var(--border-color)' }}>
              <h4 style={{ fontSize: '12px', fontWeight: '600', color: 'var(--accent-cyan)', marginBottom: '12px', display: 'flex', alignItems: 'center', gap: '6px' }}>
                <span style={{ width: '20px', height: '20px', background: 'var(--accent-cyan)', color: 'var(--bg-primary)', borderRadius: '5px', display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontSize: '12px', fontWeight: '700' }}>?</span>
                WHY - ãªãœãã†ãªã£ãŸã‹
              </h4>
              <ul style={{ listStyle: 'none', display: 'flex', flexDirection: 'column', gap: '8px' }}>
                {topic.why.map((item, i) => (
                  <li key={i} style={{ fontSize: '12px', lineHeight: '1.6', paddingLeft: '18px', position: 'relative' }}>
                    <span style={{ position: 'absolute', left: 0, color: 'var(--accent-cyan)', fontWeight: '700' }}>{i + 1}.</span>
                    {item}
                  </li>
                ))}
              </ul>
            </div>
            
            {/* 10ç§’ã¾ã¨ã‚ */}
            <div style={{ background: 'linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%)', borderRadius: '12px', padding: '14px', marginBottom: '16px', border: '1px solid rgba(16, 185, 129, 0.2)' }}>
              <h4 style={{ fontSize: '12px', fontWeight: '600', color: 'var(--accent-emerald)', marginBottom: '8px' }}>âš¡ 10ç§’ã¾ã¨ã‚</h4>
              <p style={{ fontSize: '12px', lineHeight: '1.7' }}>{topic.tenSecondSummary}</p>
            </div>
            
            {/* ã‚ˆãã‚ã‚‹è³ªå• */}
            <div style={{ marginBottom: '16px' }}>
              <h4 style={{ fontSize: '12px', fontWeight: '600', color: 'var(--text-muted)', marginBottom: '10px' }}>â“ ã‚ˆãã‚ã‚‹è³ªå•</h4>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>
                {topic.questions.map((q, i) => (
                  <div key={i}>
                    <button onClick={() => setExpandedQ(expandedQ === i ? null : i)} style={{ width: '100%', background: expandedQ === i ? 'var(--accent-blue)' : 'var(--bg-secondary)', border: '1px solid ' + (expandedQ === i ? 'var(--accent-blue)' : 'var(--border-color)'), borderRadius: expandedQ === i ? '10px 10px 0 0' : '10px', padding: '12px 14px', color: 'var(--text-primary)', cursor: 'pointer', fontSize: '12px', fontWeight: '500', textAlign: 'left', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                      {q.q}
                      <span style={{ transform: expandedQ === i ? 'rotate(180deg)' : 'rotate(0)', transition: 'transform 0.2s ease', fontSize: '10px' }}>â–¼</span>
                    </button>
                    {expandedQ === i && (
                      <div style={{ background: 'var(--bg-secondary)', borderRadius: '0 0 10px 10px', padding: '12px 14px', fontSize: '12px', color: 'var(--text-secondary)', lineHeight: '1.7', borderLeft: '3px solid var(--accent-blue)' }}>{q.a}</div>
                    )}
                  </div>
                ))}
              </div>
            </div>

            {/* AIã«è³ªå•ã™ã‚‹ */}
            <AIQuestionSection topic={topic} />
            
            {/* ç†è§£åº¦ãƒœã‚¿ãƒ³ */}
            <div style={{ display: 'flex', gap: '10px', paddingTop: '12px', borderTop: '1px solid var(--border-color)' }}>
              <button onClick={() => { setUnderstood(true); onUnderstand(topic.id, true); }} style={{ flex: 1, background: understood === true ? 'var(--accent-emerald)' : 'var(--bg-secondary)', border: '1px solid ' + (understood === true ? 'var(--accent-emerald)' : 'var(--border-color)'), borderRadius: '10px', padding: '12px', color: 'var(--text-primary)', cursor: 'pointer', fontSize: '13px', fontWeight: '600' }}>âœ“ ã‚ã‹ã£ãŸ</button>
              <button onClick={() => { setUnderstood(false); onUnderstand(topic.id, false); }} style={{ flex: 1, background: understood === false ? 'var(--accent-amber)' : 'var(--bg-secondary)', border: '1px solid ' + (understood === false ? 'var(--accent-amber)' : 'var(--border-color)'), borderRadius: '10px', padding: '12px', color: 'var(--text-primary)', cursor: 'pointer', fontSize: '13px', fontWeight: '600' }}>ğŸ¤” ãƒ¢ãƒ¤ãƒ¢ãƒ¤ã™ã‚‹</button>
            </div>
          </div>
        </article>
      );
    };

    // ========== ãƒ¡ãƒ‡ã‚£ã‚¢ãƒšãƒ¼ã‚¸ ==========
    const MediaPage = () => {
      const personalizedNews = [
        { id: 1, title: 'æ—¥éŠ€ã®æ¬¡ã®ä¸€æ‰‹ã¯ï¼Ÿ', comment: 'ã‚ãªãŸã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã«å½±éŸ¿ã—ãã†ãªãƒã‚¤ãƒ³ãƒˆã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—', tags: ['é‡‘åˆ©', 'ç‚ºæ›¿'] },
        { id: 2, title: 'åŠå°ä½“æ ªã®è¡Œæ–¹', comment: 'ãƒã‚¤ãƒ†ã‚¯é–¢é€£ã®å‹•å‘ã‚’ãƒã‚§ãƒƒã‚¯', tags: ['æ ªå¼', 'ãƒ†ãƒƒã‚¯'] },
        { id: 3, title: 'å††å®‰ã¨ç‰©ä¾¡ã®é–¢ä¿‚', comment: 'ç”Ÿæ´»ã«ç›´çµã™ã‚‹ãƒˆãƒ”ãƒƒã‚¯ã‚’è§£èª¬', tags: ['ç‚ºæ›¿', 'ç‰©ä¾¡'] },
      ];

      return (
        <div style={{ padding: '20px 16px 100px' }}>
          {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
          <div style={{ marginBottom: '24px' }}>
            <h1 style={{ fontSize: '20px', fontWeight: '700', marginBottom: '4px' }}>3åˆ†ãƒ‹ãƒ¥ãƒ¼ã‚¹</h1>
            <p style={{ fontSize: '12px', color: 'var(--text-muted)' }}>éŸ³å£°ã¨å‹•ç”»ã§ã€ãã‚‡ã†ã®ãƒãƒ¼ã‚±ãƒƒãƒˆã‚’ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—</p>
          </div>

          {/* ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
          <section style={{ marginBottom: '28px' }}>
            <div style={{ marginBottom: '12px' }}>
              <h2 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '2px' }}>ğŸ§ ä»Šæ—¥ã®ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ</h2>
              <p style={{ fontSize: '11px', color: 'var(--text-muted)' }}>3åˆ†ã§ãƒãƒ¼ã‚±ãƒƒãƒˆã‚’éŸ³å£°ãƒã‚§ãƒƒã‚¯</p>
            </div>
            <div style={{ background: 'var(--bg-card)', borderRadius: '14px', padding: '16px', border: '1px solid var(--border-color)' }}>
              <div style={{ display: 'flex', gap: '12px', marginBottom: '14px' }}>
                <div style={{ width: '70px', height: '70px', background: 'var(--gradient-1)', borderRadius: '10px', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0 }}>
                  <span style={{ fontSize: '28px' }}>ğŸ™ï¸</span>
                </div>
                <div style={{ flex: 1, minWidth: 0 }}>
                  <h3 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '4px', lineHeight: '1.3' }}>zacq ãƒãƒ¼ã‚±ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ</h3>
                  <p style={{ fontSize: '11px', color: 'var(--text-muted)', marginBottom: '4px' }}>2025/11/28</p>
                  <p style={{ fontSize: '11px', color: 'var(--text-secondary)', lineHeight: '1.4' }}>ç‰©ä¾¡ã€æ ªå¼ã€çµŒæ¸ˆæŒ‡æ¨™ã€è²¡æ”¿ã€å›½éš›é‡‘èã®5ã¤ã‚’3åˆ†ã§æ•´ç†</p>
                </div>
              </div>
              <audio controls style={{ width: '100%', height: '40px' }} src="podcast.mp3">
                ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
              </audio>
            </div>
          </section>

          {/* å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
          <section style={{ marginBottom: '28px' }}>
            <div style={{ marginBottom: '12px' }}>
              <h2 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '2px' }}>ğŸ¬ ä»Šæ—¥ã®å‹•ç”»ãƒ‹ãƒ¥ãƒ¼ã‚¹</h2>
              <p style={{ fontSize: '11px', color: 'var(--text-muted)' }}>ã‚¢ãƒŠã‚¦ãƒ³ã‚µãƒ¼ãŒãƒãƒ£ãƒ¼ãƒˆã¨ã¨ã‚‚ã«è§£èª¬</p>
            </div>
            <div style={{ background: 'var(--bg-card)', borderRadius: '14px', overflow: 'hidden', border: '1px solid var(--border-color)' }}>
              <video controls style={{ width: '100%', display: 'block' }} poster="" src="video.mp4">
                ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
              </video>
              <div style={{ padding: '12px 14px' }}>
                <h3 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>zacq ãƒãƒ¼ã‚±ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ â€“ å‹•ç”»ç‰ˆ</h3>
                <p style={{ fontSize: '11px', color: 'var(--text-muted)' }}>2025/11/28 â€¢ 3åˆ†</p>
              </div>
            </div>
          </section>

          {/* ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}
          <section>
            <div style={{ marginBottom: '12px' }}>
              <h2 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '2px' }}>âœ¨ ã‚ãªãŸã«åˆã‚ã›ãŸãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ä¸€è¨€ãƒ¡ãƒ¢</h2>
              <p style={{ fontSize: '11px', color: 'var(--text-muted)' }}>ã‚ãªãŸã®é–¢å¿ƒã«åŸºã¥ã„ã¦ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—</p>
            </div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
              {personalizedNews.map(item => (
                <div key={item.id} style={{ background: 'var(--bg-card)', borderRadius: '12px', padding: '14px', border: '1px solid var(--border-color)' }}>
                  <h3 style={{ fontSize: '14px', fontWeight: '600', marginBottom: '6px' }}>{item.title}</h3>
                  <p style={{ fontSize: '12px', color: 'var(--text-secondary)', marginBottom: '10px', lineHeight: '1.5' }}>{item.comment}</p>
                  <div style={{ display: 'flex', gap: '6px' }}>
                    {item.tags.map((tag, i) => (
                      <span key={i} style={{ fontSize: '10px', background: 'var(--bg-secondary)', color: 'var(--text-muted)', padding: '4px 8px', borderRadius: '12px', border: '1px solid var(--border-color)' }}>{tag}</span>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          </section>
        </div>
      );
    };

    // ========== ãƒœãƒˆãƒ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ==========
    const BottomNav = ({ currentTab, setCurrentTab }) => (
      <nav style={{
        position: 'fixed',
        bottom: 0,
        left: 0,
        right: 0,
        background: 'var(--bg-secondary)',
        borderTop: '1px solid var(--border-color)',
        display: 'flex',
        justifyContent: 'space-around',
        padding: '8px 0 20px',
        zIndex: 200,
      }}>
        <button
          onClick={() => setCurrentTab('home')}
          style={{
            background: 'none',
            border: 'none',
            color: currentTab === 'home' ? 'var(--accent-blue)' : 'var(--text-muted)',
            cursor: 'pointer',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            gap: '4px',
            padding: '8px 24px',
          }}
        >
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span style={{ fontSize: '10px', fontWeight: '600' }}>ãƒ›ãƒ¼ãƒ </span>
        </button>
        <button
          onClick={() => setCurrentTab('media')}
          style={{
            background: 'none',
            border: 'none',
            color: currentTab === 'media' ? 'var(--accent-blue)' : 'var(--text-muted)',
            cursor: 'pointer',
            display: 'flex',
            flexDirection: 'column',
            alignItems: 'center',
            gap: '4px',
            padding: '8px 24px',
          }}
        >
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
          <span style={{ fontSize: '10px', fontWeight: '600' }}>ãƒ¡ãƒ‡ã‚£ã‚¢</span>
        </button>
      </nav>
    );

    // ========== ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ ==========
    const HomePage = ({ onSettingsClick }) => {
      const [understanding, setUnderstanding] = useState({});

      const handleUnderstand = (topicId, value) => {
        setUnderstanding(prev => ({ ...prev, [topicId]: value }));
      };

      const understoodCount = Object.values(understanding).filter(Boolean).length;
      const totalTopics = marketData.topics.length;

      return (
        <div style={{ paddingBottom: '80px' }}>
          <Header onSettingsClick={onSettingsClick} />
          <main style={{ padding: '20px 16px' }}>
            {understoodCount > 0 && (
              <div style={{ background: 'var(--bg-card)', borderRadius: '10px', padding: '12px 14px', marginBottom: '16px', border: '1px solid var(--border-color)', display: 'flex', alignItems: 'center', gap: '12px' }}>
                <div style={{ width: '40px', height: '40px', borderRadius: '50%', background: `conic-gradient(var(--accent-emerald) ${(understoodCount / totalTopics) * 360}deg, var(--bg-secondary) 0deg)`, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                  <div style={{ width: '32px', height: '32px', borderRadius: '50%', background: 'var(--bg-card)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: '700', fontSize: '12px' }}>{understoodCount}/{totalTopics}</div>
                </div>
                <div>
                  <p style={{ fontWeight: '600', fontSize: '13px' }}>{understoodCount === totalTopics ? 'ğŸ‰ å…¨ãƒˆãƒ”ãƒƒã‚¯ç†è§£å®Œäº†ï¼' : 'ç†è§£åº¦ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°'}</p>
                  <p style={{ fontSize: '11px', color: 'var(--text-muted)' }}>{understoodCount === totalTopics ? 'ä»Šæ—¥ã®ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯å®Œç’§ã§ã™' : `æ®‹ã‚Š${totalTopics - understoodCount}ãƒˆãƒ”ãƒƒã‚¯`}</p>
                </div>
              </div>
            )}

            <MarketOverview indices={marketData.indices} date={marketData.date} topics={marketData.topics} />

            <h2 style={{ fontSize: '11px', fontWeight: '600', color: 'var(--text-muted)', letterSpacing: '0.5px', marginBottom: '14px', marginTop: '20px' }}>ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬</h2>

            {marketData.topics.map(topic => (
              <TopicCard key={topic.id} topic={topic} onUnderstand={handleUnderstand} />
            ))}
          </main>
        </div>
      );
    };

    // ========== ãƒ¡ã‚¤ãƒ³App ==========
    const App = () => {
      const [showOnboarding, setShowOnboarding] = useState(false);
      const [showSettings, setShowSettings] = useState(false);
      const [currentTab, setCurrentTab] = useState('home');
      const [profile, setProfile] = useState({ name: '', jobType: 'securities', purposes: [], commitDays: '3', notifications: true });

      useEffect(() => {
        const saved = localStorage.getItem('zacqProfile');
        const onboardingDone = localStorage.getItem('zacqOnboardingDone');
        if (saved) setProfile(JSON.parse(saved));
        if (!onboardingDone) setShowOnboarding(true);
      }, []);

      useEffect(() => {
        localStorage.setItem('zacqProfile', JSON.stringify(profile));
      }, [profile]);

      const handleOnboardingComplete = (data) => {
        setProfile(prev => ({ ...prev, ...data }));
        localStorage.setItem('zacqOnboardingDone', 'true');
        setShowOnboarding(false);
      };

      const handleOnboardingSkip = () => {
        localStorage.setItem('zacqOnboardingDone', 'true');
        setShowOnboarding(false);
      };

      const handleReset = () => {
        setShowSettings(false);
        setShowOnboarding(true);
        setProfile({ name: '', jobType: 'securities', purposes: [], commitDays: '3', notifications: true });
      };

      if (showOnboarding) {
        return <Onboarding onComplete={handleOnboardingComplete} onSkip={handleOnboardingSkip} />;
      }

      return (
        <div style={{ minHeight: '100vh', background: 'var(--bg-primary)' }}>
          {showSettings && <SettingsPage profile={profile} setProfile={setProfile} onClose={() => setShowSettings(false)} onReset={handleReset} />}

          {currentTab === 'home' && <HomePage onSettingsClick={() => setShowSettings(true)} />}
          {currentTab === 'media' && (
            <>
              <Header onSettingsClick={() => setShowSettings(true)} />
              <MediaPage />
            </>
          )}

          <BottomNav currentTab={currentTab} setCurrentTab={setCurrentTab} />
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
